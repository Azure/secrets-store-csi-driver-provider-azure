trigger: none

pr:
  branches:
    include:
    - master
    - release-*
  paths:
    exclude:
      - docs/*
      - website/*
      - README.md

pool:
  name: staging-pool-amd64-mariner-2
  demands:
  - ImageOverride -equals 1es-azlinux-3-amd64-custom-disk

jobs:
  - template: templates/e2e-test-azure.yaml
    parameters:
      osTypes:
      - "linux"
      - "windows"
  # TODO: re-enable this job after implementing automated ext release process
  # using https://github.com/Azure/secrets-store-csi-driver-provider-azure/issues/1382 for tracking
  # this will ensure any changes to provider works on arc extension too.
  # - template: templates/arc/e2e-extension-test.yaml
