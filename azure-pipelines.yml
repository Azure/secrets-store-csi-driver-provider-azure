trigger:
  branches:
    include:
    - master
    - release-*

pr:
  branches:
    include:
      - master
      - release-*
  paths:
    exclude:
      - docs/*
      - website/*

pool: staging-pool

jobs:
  # - template: .pipelines/templates/unit-test.yaml
  # - template: .pipelines/templates/e2e-test-kind.yaml
  #   parameters:
  #     driverWriteSecrets:
  #     - "true"
  #     - "false"
  # - template: .pipelines/templates/load-test.yaml
  # - template: .pipelines/templates/e2e-test-azure.yaml
  #   parameters:
  #     clusterTypes:
  #     - "aks"
  #     - "aks-engine"
  #     osTypes:
  #     - "linux"
  #     - "windows"
  #     testClusterUpgrade: true
  - template: .pipelines/templates/e2e-test-azure.yaml 
    parameters:
      clusterTypes:
      - "aks"
      osTypes:
      - "linux"
      testWithGPU: true
  # - template: .pipelines/templates/soak-test.yaml
  #   parameters:
  #     clusterConfigs:
  #     - "csi-secrets-store-soak-linux-aks"
  #     - "csi-secrets-store-soak-win-aks"
