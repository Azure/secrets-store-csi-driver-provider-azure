{{- if .Values.arc.isMonitoringEnabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: arc-telegraf-config
  namespace: {{ .Release.Namespace }}
data:
  telegraf.conf: |
{{ (tpl ( .Files.Get "config/telegraf-conf.tmpl") .) | indent 4 }}
---
apiVersion: v1 
kind: ConfigMap 
metadata: 
  name: arc-mdm-config
  namespace: {{ .Release.Namespace }}
data: 
  mdmconfig.json: "{\"imdsInfo\":[{ \"account\": \"{{ .Values.arc.mdm.accountName }}\" }]}"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: arc-fluentd-conf
  namespace: {{ .Release.Namespace }}
data:
  fluentd.conf: {{ .Files.Get "config/fluentd.conf" | quote }}
  kubernetes.conf: {{ .Files.Get "config/fluentd-kubernetes.conf" | quote }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: arc-gcstenant-conf
  namespace: {{ .Release.Namespace }}
data:
  gcstenant1.json: {{ .Files.Get "config/gcstenant-conf.json" | quote }}
{{- end }}
